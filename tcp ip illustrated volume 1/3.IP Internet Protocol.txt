3.1 Introduction.

	all TCP, UDP, ICMP, and IGMP data gets transmitted as IP datagrams.
	IP provides an unreliable, connectionless datagram delivery service.
	
	1. by unreliable we mean there are no guarantees that an IP datagram successfully gets to its destination.
	IP has a simple error handling algorithm: throw away the datagram and try to send an ICMP message back to the source.
	any required reliability must be provided by the upper layers.
	
	2. the term connectionless means that IP does not maintain any state information about successive datagrams.
	each datagram is handled independently from all other datagrams.
	it can get delivery out of order.
	
	IP routing
	IP header
	subnetting
	commands: ifconfg, netstat.
	
3.2 IP header.
	
	the normal size of the IP header is 20 bytes, unless options are present. 20*8= 160 bits.
	
	the 4 bytes in the 32-bit value are transmitted in the order:
	
	4 bytes = 8 bits.
	
	00 - 07 
	08 - 15
    16 - 23
    23 - 26
    26 - 31
	
	bits 0-7 first, then 8-15, then 16-23, and bits 24-31 last.
	this is called big endian byte ordering, which is the byte ordering required for all binary integers in the TCP/IP headers as they traverse a network. this is called the network byte order.

	e.g 90AB12CD
	
	big endian: store the most significant byte in the smallest address.
	1000 90
	1001 AB
	1002 12
	1003 CD
	
	little endian: you store the least significant byte in the smallest address.
	1000 CD
	1001 12
	1002 AB
	1003 90
	
	little endian must convert the header values into the network byte order before transmitting the data.
	
	the hader length is the number of 32-bit words in the header, including any options.
	since this is a 4-bit field, it limits the header to 60 bytes. the normal value of this field is 5.
	
	the type-of-service field (TOS) is composed of a 3-bit precedence field
			31                                0
			big endian 					little endian
	Dword:	00010111 00010111 00010111 00010111
				  word				word
			byte 		byte	byte	 byte
			8bits	    8bits   8bits    8bits
			
	1. protocol version field 4-bit
	2. header length field 4-bit
	3. type-of-service(TOS) is composed of a 3-bit precedence field + 4 TOS bits  + an unused bit that must be 0.
		4 TOS bits are : minimize delay, maximize throughput, maximize reliability and minimize menetary cost.
		only one of these 4 bits can be turned on. if all 4 bits are 0 it implies normal service.
	4. total length field is the total length of the ip datagram in bytes.
		using this field and the header length field, we know where the data portion of the ip datagram starts, and its length. 
		this field also changes when a datagram is fragmented.
	
		the maximun size of an IP datagram is 65535 bytes.
		a host is not required to receive a datagram larger than 576 bytes.
		
		the minimum Ethernet frame size is 46 bytes, an IP datagram can be smaller.
		
	5. the identification field uniquely identifies each datagram sent by a host. 
		it normally increments by one each time a datagram is sent.
	6. the time-to-live field(TTL), sets an upper limit on the number of routers through which a datagram can pass.
	7. the protocol field identifies which protocol gave the data for IP to send.
	8. the header checksum is calculated over the IP header only.
	9. 32-bit source IP address and 32-bit destination IP address.
	10. options field:
		1. security and handling restrictions.
		2. record route 
		3. timestamp
		4. loose source routing
		5. strict source routing
		
		the options field always ends on a 32-bit boundary.
		
3.3 IP Routing.
	general scheme:
	1. IP receive a datagram from TCP UDP ICMP or IGMP or from a network interface.
	   the ip layer has a routing table in memory that it searches each time it receives a datagram to send.
	
		each entry in the routing table contains the following information:
			1. destination ip address.
			2. ip address of a next-hop router, or the ip address of a directly connected network.
			3. flags.
			4. specification of which network interface the datagram should be passed to for transmisstion.
			
			
	2. when a datagram is received from a network interface, 
		ip first checks if the destination IP address is one of its own IP addresses or an IP broadcast address.
		if so, the datagram is delivered to the protocol module specified by the protocol field in the IP header.
		if not 
			1. if the IP layer was configured to act as a router the packet is forwarded.
			2. else the datagram is silently discarded.
			
	3. ip routing is done on a hop-by-hop basis.
	
	4. ip routing performs the following actions:
		1. search the routing table for an entry that matches the complete destination IP address.
		2. search the routing table for an entry that matches just the destination network ID.
		3. search the routing table for an entry labeled "default"
		
		if none of the steps works, the datagram is undeliverable.
		
3.4 Subnet Addressing
		32bits		 16bits   8bits     8bits
	an IP address = netid + subnetid + hostid
	
3.5 Subnet Mask
	
	
	
	

		
	
	
	
	