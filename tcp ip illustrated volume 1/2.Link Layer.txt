2.1 Introduction.

	purpose:
		send and receive 
		1> ip datagrams for the ip module,
		2> arp requests and replies for the arp module,
		3> rarp requests and replies for the rarp module.
		
	tcp/ip supports many different link layers, depending on the type of networking hardware being used:
	ethernet, token ring, fddi(fiber distributed data interface), rs-232 serial lines, and the like.
	
	Ethernet link layer,
	SLIP : serial line ip
	PPP : point-to-point protocol
	loopback driver 
	MTU(maximum transmission unit)
	
	
2.2 Ethernet and IEEE 802 Encapsulation

	ethernet is the predominant form of local area network technology used with tcp/ip.
	ethernet uses an access method called CSMA/CD( carrier sense, multiple access with collision detection).
	ethernet opeates at 10Mbits/sec and uses 48-bit addresses.
	
	IEEE: institure of electrical and electronics engineers
	802.3 covers an entire set of CSMA/CD networks.
	802.4 covers token bus networks
	802.5 covers token ring networks.
	802.2 standard common to all three of these
	
	in the tcp/ip world, the encapsulation of ip datagrams is defined in RFC 894 for ethernets and in RFC 1042 for IEEE 802 networks.
	
	the host requirements RFC requires that every Internet host connect to a 10 Mbits/sec ethernet cable:
	1. must be able to send and receive packets using RFC 894 encapsulation.
	2. should be able to receive RFC 1042 packets intermixed with RFC 894 packets.
	3. may be able to send packets using RFC 1042 encapsulation. if the host can send both types of packets, the type of packet send must be configurable and the configuration option must default to RFC 894 packets.
	
	hardware addresses : both frame formats use 48-bit(6 byte) destination and source addresses.
	
2.3 Trailer Encapsulation.
	
	trailer encapsulation is another form of encapsulation used on enthernets,
	it was an experiment to improved performance by rearranging the order of the fields in the ip datagram.
	
	nowadays trailer encapsulation is deprecated.
	
2.4 SLIP: Serial Line IP.
	
	speed : 19200 bits/sec or below.
	
	SLIP stands for serial line ip. it is a simple form of encapsulation for ip datagrams on serial lines.
	the following rules sepcify the framing used by SLIP:
	1. the ip datagram is terminated by the special character called END(0xc0). also, to pervent any line noise before the datagram from being interpreted as part of this datagram, most implementations transmit an END character at the beginning of the datagram too.
	2. if a byte of the ip datagram equals the END character, the 2-byte sequence 0xdb, 0xdc is transmitted instead.
	(the special character , 0xdb, is called the SLIP ESC character).
	3. if a byte of the IP datagram equals the SLIP ESC character, the 2-byte sequence 0xdb, 0xdd is transmitted instead.
	
	SLIP is a simple framing method, it has some deficiencies:
	1. each end must know the other's ip address. there is no method for one end to inform the other of its ip address.
	2. there is no type field.  if a serial line is used for SLIP, it can't be used for some other protocol at the same time.
	3. there is no checksum added by SLIP, it's up to the higher layers to detect this.
	
2.5. Compressed SLIP.
	1. CSLIP normally reduces the 40-byte header to 3 or 5 bytes.
	2. on each of the CSLIP link maintains the state of up to 16 tcp connections.
	3. it knows that some of the fields in the two headers for a given connection normally don't change.
	4. of the fields that do change, most change by a small positive amount. these smaller headers greatly improve the interactive response time.
	
2.6 PPP: Point-to-Point Protocol
	PPP, corrects all the deficiencies in SLIP, it consists of three components:
	1. a way to encapsulate ip datagrams on a serial link.
	2. A Link control protocol(LCP) to establish, configure, and test the data-link connection.
	3. a family of network control protocols (NCPs) specific to different network layer protocols.
	
	PPP frames:
	1. each frames begins and ends with a flag byte whose value is 0x7e.   1-byte * 2
	2. followed by an address byte whose value is always oxff			   1-byte * 1
	3. and then a control byte, with a value of 0x03.					   1-byte * 1
	4. next comes the protocol field, 									   2-byte * 1
		value of 0x0021 means the information field is an ip datagram 
		value of 0xc021 means information field is link control data,
		value of ox8021 is for network control data.
	5. the CRC field(OR FCS, for frame check sequence) is a cyclic redundancy check, to detect errors in the frame.
	6. since the byte value 0x7e is the flag character, PPP needs to escape this byte when it appears in the information field.
	
	on synchronous link using bit stuffing to escape hte flag character.
	on asynchronous links the special byte 0x7d is used as an escape character.
	
	PPP advantages:
		1. support for multiple protocols on a single serial line, not just ip datagrams,
		2. a cyclic redundancy check on every frame.
		3. dynamic negotiation of the ip address for each end
		4. tcp and ip header compression similar to CSLIP,
		5. a link control protocol for negotiating many data-link options.
		
2.7 Lookback Interface.
	the class A network Id 127 is reserved for the lookback interface.

	1. everything send to the loopback address appears as ip input.
	2. datagrams send to a broadcast address or a multicast address are copied to the loopback interface and sent out on the ethernet.
	3. anything sent to one of the host's own ip address is sent to the loopback interface.
	
2.8 MTU.
	the maxinum transmission unit.
	
	$netstat -in
	
	if ip has a datagram to send, and the datagram is larger than the link layer's MTU, IP performs fragmentation, breaking the datagram up into smaller pieces(fragments), so that each fragment is smaller than the MTU.
	
2.9 Path MTU.

	the smallest MTU of any data link that packets traverse between the two hosts, this is called path MTU.
	
2.10 Serial Line Throughput Calculations.

  if the line speed is 9600 bits/sec, with 8 bits per byte, plus 1 start bit and 1 stop bit, the line speed is 960 bytes/sec.   (1 + 8 + 1) bits = 1 byte , transferring a 1024-byte packet at this speed takes 1066ms.
  
  SLIP 533 ms.
	
  waiting 533ms is unacceptable for interactive response. 
  hubman factors studies have found that an interactive response time longer than 100-200ms is preceived as bad.

2.11 Sunmmary.
		
	both SLIP and PPP are often used on slow links, both porvide a way to compress the common fields that don't ofen change. this provides better interactive response.
	
	access to loopback interface is either through the special loopback address, or by sending ip datagrams to one of the host's own ip addresses.
	
	loopback data has been completely processed by the transport layer and by IP when it loops around to go up the protocol stack.
	
	
	
	
	
	
	